# Steps

1. Initiated using <https://blog.logrocket.com/how-to-build-full-stack-app-redwoodjs/>
2. Once installed, run `yarn rw setup ui tailwindcss` for adding tailwind. Check index.css in web for confirmation.
3. Add schema in api/db/schema.prisma and DATABASE_URL in `.env`. Then, execute `yarn redwood prisma migrate dev` for migration.
4. Execute `yarn redwood prisma studio` and check migration results at `http://localhost:5555.`
5. Add authentication using `yarn rw setup auth dbAuth`. It generates the default password in .env file. To generate a new one (logs out all users) using `yarn rw generate secret`.
6. Execute `yarn rw g dbAuth` for generating the simple login/signup and forgot/reset password forms.
7. `yarn redwood g sdl --typescript post` generates only SDL and services only. To generate all, you can use `yarn redwood g scaffold post`
8. `yarn redwood g page home` - home page
9. `yarn rw generate cell home` - Cells are a declarative approach to data fetching — it executes a GraphQL query and manages its lifecycle

# Concepts

```
   Browser
      |
    React    ─┐
      |       │
   Graph QL   ├─ Redwood
      |       │
   Services  ─┘
      |
   Database
```

## Dir Structure

At the top level we have three directories, api, scripts and web. Redwood separates the backend (api) and frontend (web) concerns into their own paths in the codebase. (Yarn refers to these as "workspaces". In Redwood, we refer to them as "sides.") When you add packages going forward you'll need to specify which workspace they should go in. For example (don't run these commands, we're just looking at the syntax):

```sh
yarn workspace web add marked
yarn workspace api add better-fs
```

**scripts** is meant to hold any Node scripts you may need to run from the command line that aren't directly related to the api or web sides. The file that's in there, seed.ts is used to populate your database with any data that needs to exist for your app to run at all (maybe an admin user or site configuration).

**api/src** contains all your backend code. api/src contains five more directories:

- directives will contain GraphQL schema directives for controlling access to queries and transforming values.
- functions will contain any lambda functions your app needs in addition to the graphql.ts file auto-generated by Redwood. This file is required to use the GraphQL API.
- graphql contains your GraphQL schema written in a Schema Definition Language (the files will end in .sdl.ts).
- lib contains a few files:auth.ts starts as a placeholder for adding auth functionality and has a couple of bare-bones functions in it to start, db.ts instantiates the Prisma database client so we can talk to a database and logger.ts which configures, well, logging. You can use this directory for other code related to the API side that doesn't really belong anywhere else.
- services contains business logic related to your data. When you're querying or mutating data for GraphQL (known as resolvers), that code ends up here, but in a format that's reusable in other places in your application.

## Redwood Commands

- `yarn rw g page home /`
  - Creates ``web/src/pages/HomePage/HomePage.tsx` => `home + Page`.
  - Creates ``web/src/pages/HomePage/HomePage.test.tsx` with a single, passing test.
  - Creates ``web/src/pages/HomePage/HomePage.stories.tsx` => Storybook
  - Adds a `<Route>` in `web/src/Routes.tsx` that maps the path `/` to the `HomePage`. Import is done by Redwood automatically.
  Note: It also generate types and MetaData about page.
  Note2: CODE-SPLITTING EACH PAGE - so only page requested will be loaded. You can change this too.

- `yarn rw g layout blog`
  - Creates `web/src/layouts/BlogLayout/BlogLayout.tsx` and associated test and stories files.

- `yarn rw prisma migrate dev`
  - Creates the migration. You will be asked to add the name to it. It will add files in `api/db/migrations` with `migration.sql`
  - Then, it applies the migration by executing `migration.sql`
  - Note: default db is SQLite

- `yarn rw prisma studio`
  - To check migration results at `http://localhost:5555`.

- `yarn rw g scaffold post`
  - generates everything required for CRUD (Create, Retrieve, Update, Delete) actions on post
    - css (scaffold.css)
    - Add new layout
    - Add new group of pages
    - Add routes in Routes.tsx
    - Add components for each operation
    - Add three cells - fetch, list and update
    - Add SDL for graphQL query and mutations
    - Add service that makes the Prisma client calls to get data in and out of the database

- `yarn rw g cell Articles`
  - Creates `/web/src/components/ArticlesCell/ArticlesCell.tsx`, `test.tsx` `mock.ts` and `stories.tsx` files
  - With boilerplate code
  - Note: Articles, doesn't match with any of the model. Therefore, you have to replace the articles with posts in `ArticlesCell.tsx`.
  - Also, you might get type error for ArticlesQuery. For which you can use the next command

- `yarn rw g types`
  - Generates the missing types.

- `yarn rw g component Article`
  - Creates component

- `yarn rw g sdl Contact`
  - Unlike scaffold, only generates SDL and service - `api/src/graphql/contacts.sdl.ts` (GraphQL's schema definition language), `api/src/services/contacts/contacts.ts` and test files etc.
  - `yarn rw g sdl Comment --no-crud`  Note the --no-crud flag here. This gives us bare-bones functionality to start with (read-only access to our model) that we can build on

- `yarn rw setup auth dbAuth`
  - installs the backend components needed for dbAuth. For override the existing file /api/src/lib/auth.ts say yes.

- `yarn rw g dbAuth`
  - Creates pages for login, signup and forgot password pages

- `yarn rw g secret`
  - Regenerates the secret key in `.env`

- `yarn rw storybook`
  - Start up the Storybook server at 7910

- `yarn rw test`
  - Executes the unit tests
  - `yarn rw test --coverage --coverageReporters=html`  for coverage and html report

- `yarn rw console`
  - Redwood Console. Standard Node console but with most of Redwood's internals already imported and ready to go! Most importantly, that includes the database

# README

Welcome to [RedwoodJS](https://redwoodjs.com)!

> **Prerequisites**
>
> - Redwood requires [Node.js](https://nodejs.org/en/) (>=14.19.x <=16.x) and [Yarn](https://yarnpkg.com/) (>=1.15)
> - Are you on Windows? For best results, follow our [Windows development setup](https://redwoodjs.com/docs/how-to/windows-development-setup) guide

Start by installing dependencies:

```
yarn install
```

Then change into that directory and start the development server:

```
cd my-redwood-project
yarn redwood dev
```

Your browser should automatically open to http://localhost:8910 where you'll see the Welcome Page, which links out to a ton of great resources.

> **The Redwood CLI**
>
> Congratulations on running your first Redwood CLI command!
> From dev to deploy, the CLI is with you the whole way.
> And there's quite a few commands at your disposal:
> ```
> yarn redwood --help
> ```
> For all the details, see the [CLI reference](https://redwoodjs.com/docs/cli-commands).

## Prisma and the database

Redwood wouldn't be a full-stack framework without a database. It all starts with the schema. Open the [`schema.prisma`](api/db/schema.prisma) file in `api/db` and replace the `UserExample` model with the following `Post` model:

```
model Post {
  id        Int      @id @default(autoincrement())
  title     String
  body      String
  createdAt DateTime @default(now())
}
```

Redwood uses [Prisma](https://www.prisma.io/), a next-gen Node.js and TypeScript ORM, to talk to the database. Prisma's schema offers a declarative way of defining your app's data models. And Prisma [Migrate](https://www.prisma.io/migrate) uses that schema to make database migrations hassle-free:

```
yarn rw prisma migrate dev

# ...

? Enter a name for the new migration: › create posts
```

> `rw` is short for `redwood`

You'll be prompted for the name of your migration. `create posts` will do.

Now let's generate everything we need to perform all the CRUD (Create, Retrieve, Update, Delete) actions on our `Post` model:

```
yarn redwood g scaffold post
```

Navigate to http://localhost:8910/posts/new, fill in the title and body, and click "Save":

Did we just create a post in the database? Yup! With `yarn rw g scaffold <model>`, Redwood created all the pages, components, and services necessary to perform all CRUD actions on our posts table.

## Frontend first with Storybook

Don't know what your data models look like?
That's more than ok—Redwood integrates Storybook so that you can work on design without worrying about data.
Mockup, build, and verify your React components, even in complete isolation from the backend:

```
yarn rw storybook
```

Before you start, see if the CLI's `setup ui` command has your favorite styling library:

```
yarn rw setup ui --help
```

## Testing with Jest

It'd be hard to scale from side project to startup without a few tests.
Redwood fully integrates Jest with the front and the backends and makes it easy to keep your whole app covered by generating test files with all your components and services:

```
yarn rw test
```

To make the integration even more seamless, Redwood augments Jest with database [scenarios](https://redwoodjs.com/docs/testing.md#scenarios)  and [GraphQL mocking](https://redwoodjs.com/docs/testing.md#mocking-graphql-calls).

## Ship it

Redwood is designed for both serverless deploy targets like Netlify and Vercel and serverful deploy targets like Render and AWS:

```
yarn rw setup deploy --help
```

Don't go live without auth!
Lock down your front and backends with Redwood's built-in, database-backed authentication system ([dbAuth](https://redwoodjs.com/docs/authentication#self-hosted-auth-installation-and-setup)), or integrate with nearly a dozen third party auth providers:

```
yarn rw setup auth --help
```

## Next Steps

The best way to learn Redwood is by going through the comprehensive [tutorial](https://redwoodjs.com/docs/tutorial/foreword) and joining the community (via the [Discourse forum](https://community.redwoodjs.com) or the [Discord server](https://discord.gg/redwoodjs)).

## Quick Links

- Stay updated: read [Forum announcements](https://community.redwoodjs.com/c/announcements/5), follow us on [Twitter](https://twitter.com/redwoodjs), and subscribe to the [newsletter](https://redwoodjs.com/newsletter)
- [Learn how to contribute](https://redwoodjs.com/docs/contributing)
